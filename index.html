<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØºØ§Ø¨Ø© Ù‚Ø±Ø¯ÙˆØ´ - Ù„Ø¹Ø¨Ø© Ø¬Ù…Ø¹ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ ÙˆØ§Ù„Ø®Ø¶Ø§Ø±</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1B5E20;
            --secondary-color: #2E7D32;
            --accent-color: #4CAF50;
            --vegetable-color: #7CB342;
            --gold-color: #FFC107;
            --text-light: #FFFFFF;
            --text-dark: #1A1A1A;
            --fruit-gradient: linear-gradient(135deg, #4CAF50, #2E7D32);
            --vegetable-gradient: linear-gradient(135deg, #7CB342, #558B2F);
            --tournament-gradient: linear-gradient(135deg, #9C27B0, #7B1FA2);
            --jungle-green: #1B5E20;
            --jungle-light: #2E7D32;
            --monkey-brown: #8D6E63;
            --banana-yellow: #FFEB3B;
            --error-color: #F44336;
            --warning-color: #FF9800;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Tajawal', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--jungle-green), var(--jungle-light));
            color: var(--text-light);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            text-align: center;
            border: 4px solid var(--gold-color);
            position: relative;
        }

        .developer-credit {
            position: absolute;
            top: 20px;
            left: 25px;
            background: linear-gradient(135deg, var(--gold-color), #FFD54F);
            color: var(--text-dark);
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: 800;
            font-size: 1rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
            z-index: 10;
            border: 2px solid white;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .header-section {
            margin-bottom: 25px;
            position: relative;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 3.5rem;
            font-weight: 900;
            text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            color: var(--secondary-color);
            margin-bottom: 30px;
            font-size: 1.5rem;
            font-weight: 700;
            background: rgba(255, 255, 255, 0.8);
            padding: 15px 25px;
            border-radius: 20px;
            display: inline-block;
            border: 3px dashed var(--accent-color);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .screen {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 25px;
        }
        
        .active {
            display: flex;
        }
        
        .player-turn {
            background: var(--fruit-gradient);
            color: white;
            padding: 25px;
            border-radius: 20px;
            width: 100%;
            margin-bottom: 25px;
            border: 3px solid var(--gold-color);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
            position: relative;
            overflow: hidden;
        }

        .player-turn.vegetable-mode {
            background: var(--vegetable-gradient);
        }

        .player-turn.tournament-mode {
            background: var(--tournament-gradient);
        }

        .player-turn h2 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            font-weight: 800;
        }
        
        .cards-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            width: 100%;
            margin: 30px 0;
        }
        
        .card {
            aspect-ratio: 3/4;
            background: white;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            cursor: pointer;
            transition: all 0.4s ease;
            border: 4px solid #E0E0E0;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-12px);
            border-color: var(--gold-color);
            box-shadow: 0 25px 40px rgba(0, 0, 0, 0.3);
        }
        
        .card.selected {
            border: 5px solid var(--gold-color);
            transform: scale(1.1);
            box-shadow: 0 0 40px rgba(255, 193, 7, 0.9);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 25px rgba(255, 193, 7, 0.7); }
            50% { box-shadow: 0 0 40px rgba(255, 193, 7, 1); }
            100% { box-shadow: 0 0 25px rgba(255, 193, 7, 0.7); }
        }
        
        button {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.4s ease;
            margin: 15px 0;
            width: 90%;
            max-width: 320px;
            border: 3px solid var(--gold-color);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        button:hover {
            background: var(--accent-color);
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.35);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .vegetable-btn {
            background: var(--vegetable-color);
        }

        .tournament-btn {
            background: var(--tournament-gradient);
        }
        
        .player-indicator {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .player-indicator div {
            padding: 18px 20px;
            border-radius: 15px;
            background: #E8F5E9;
            color: var(--primary-color);
            transition: all 0.3s ease;
            flex: 1;
            min-width: 110px;
            text-align: center;
            border: 3px solid #C8E6C9;
            font-weight: 800;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .player-indicator .active-player {
            background: var(--gold-color);
            color: var(--text-dark);
            border-color: #FFD54F;
            box-shadow: 0 0 25px rgba(255, 193, 7, 0.6);
            transform: translateY(-8px);
        }
        
        .selection-category {
            width: 100%;
            margin: 25px 0;
        }

        .category-title {
            font-size: 1.6rem;
            color: var(--primary-color);
            margin-bottom: 25px;
            font-weight: 800;
            padding: 18px;
            border-radius: 18px;
            background: rgba(76, 175, 80, 0.15);
            border: 3px solid var(--accent-color);
        }
        
        .fruit-selection {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
            margin: 20px 0;
        }
        
        .selection-btn {
            background: var(--fruit-gradient);
            color: white;
            padding: 25px;
            border-radius: 20px;
            border: 3px solid var(--gold-color);
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
        }

        .vegetable-selection-btn {
            background: var(--vegetable-gradient);
        }

        .tournament-selection-btn {
            background: var(--tournament-gradient);
        }
        
        .selection-btn:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 35px rgba(0, 0, 0, 0.35);
        }

        .selection-btn.active {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 193, 7, 0.8);
        }
        
        .selection-title {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 15px;
        }
        
        .selection-items {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            font-size: 2.5rem;
        }
        
        .instructions {
            background: #E8F5E9;
            padding: 35px;
            border-radius: 20px;
            margin-top: 30px;
            color: var(--primary-color);
            text-align: right;
            line-height: 1.9;
            border: 3px solid var(--accent-color);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .instructions h3 {
            color: var(--primary-color);
            margin-bottom: 25px;
            font-size: 1.8rem;
            text-align: center;
            font-weight: 800;
        }

        .instructions p {
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .sound-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            justify-content: center;
        }

        .sound-btn {
            padding: 15px 25px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 700;
            border: 2px solid var(--gold-color);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .sound-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-5px);
        }

        .mode-indicator {
            background: var(--fruit-gradient);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: 800;
            margin-bottom: 25px;
            display: inline-block;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
            border: 2px solid white;
            font-size: 1.2rem;
        }

        /* ØªØµÙ…ÙŠÙ… Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ø­Ø³Ù†Ø© */
        .custom-alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, var(--warning-color), #FFB74D);
            color: var(--text-dark);
            padding: 30px 40px;
            border-radius: 25px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            z-index: 1000;
            text-align: center;
            border: 4px solid white;
            max-width: 90%;
            width: 400px;
        }

        .custom-alert h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            font-weight: 800;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .custom-alert p {
            font-size: 1.3rem;
            margin-bottom: 25px;
            font-weight: 600;
            line-height: 1.6;
        }

        .custom-alert button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            width: auto;
            margin: 0 auto;
        }

        .custom-alert button:hover {
            background: var(--secondary-color);
            transform: translateY(-3px);
        }

        .alert-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
        }

        .winner-celebration {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            padding: 50px;
            background: linear-gradient(135deg, var(--gold-color), #FFD54F);
            border-radius: 25px;
            border: 5px solid white;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .winner-trophy {
            font-size: 10rem;
            animation: bounce 1.5s infinite alternate;
            z-index: 1;
        }

        @keyframes bounce {
            0% { transform: translateY(0); }
            100% { transform: translateY(-30px); }
        }

        .winner-name {
            font-size: 3rem;
            font-weight: 900;
            color: var(--text-dark);
            z-index: 1;
            background: rgba(255,255,255,0.8);
            padding: 20px 40px;
            border-radius: 25px;
        }

        .winner-message {
            font-size: 1.8rem;
            color: var(--text-dark);
            font-weight: 700;
            z-index: 1;
            background: rgba(255,255,255,0.8);
            padding: 15px 30px;
            border-radius: 20px;
        }

        .winner-items {
            display: flex;
            gap: 25px;
            font-size: 4rem;
            z-index: 1;
            background: rgba(255,255,255,0.8);
            padding: 20px 35px;
            border-radius: 25px;
        }

        .welcome-screen {
            text-align: center;
            padding: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 25px;
            border: 5px solid var(--gold-color);
            width: 100%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .welcome-icon {
            font-size: 10rem;
            margin: 30px 0;
            animation: float 3s ease-in-out infinite;
        }

        .pass-device-screen {
            text-align: center;
            padding: 50px;
            border-radius: 25px;
            border: 5px solid var(--gold-color);
            width: 100%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .pass-device-icon {
            font-size: 8rem;
            margin: 30px 0;
            animation: bounce 1.5s infinite alternate;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-30px); }
            100% { transform: translateY(0px); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2.8rem;
            }
            
            .card {
                font-size: 4rem;
            }

            .custom-alert {
                width: 90%;
                padding: 25px;
            }

            .developer-credit {
                position: relative;
                top: 0;
                left: 0;
                margin-bottom: 20px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Ø§Ø³Ù… Ø§Ù„Ù…Ø·ÙˆØ± ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ -->
        <div class="developer-credit">
            <i class="fas fa-code"></i>
            ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø©: Ø²ÙŠØ§Ø¯ Ø§Ù„Ø¹ÙˆÙ†ÙŠ
        </div>

        <div class="header-section">
            <h1>ğŸŒ³ ØºØ§Ø¨Ø© Ù‚Ø±Ø¯ÙˆØ´ ğŸµ</h1>
            <div class="subtitle">ğŸŒ Ø§Ø¬Ù…Ø¹ 4 Ø¹Ù†Ø§ØµØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø© Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù†ÙˆØ¹ Ù„Ù„ÙÙˆØ²! ğŸ¥¦</div>
        </div>
        
        <div class="sound-controls">
            <button class="sound-btn" id="sound-toggle">ğŸ”Š ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª</button>
        </div>
        
        <div class="player-indicator">
            <div id="player1-indicator">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¡</div>
            <div id="player2-indicator">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¢</div>
            <div id="player3-indicator">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù£</div>
            <div id="player4-indicator">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¤</div>
        </div>
        
        <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ -->
        <div id="welcome-screen" class="screen active">
            <div class="welcome-screen">
                <div class="welcome-icon">ğŸŒ³ğŸµ</div>
                <h2 style="color: white; margin-bottom: 25px; font-size: 2.5rem;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ ØºØ§Ø¨Ø© Ù‚Ø±Ø¯ÙˆØ´!</h2>
                <p style="color: white; margin-bottom: 35px; font-size: 1.4rem; font-weight: 600;">Ù„Ø¹Ø¨Ø© Ù…Ø³Ù„ÙŠØ© Ù„Ø¬Ù…Ø¹ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ ÙˆØ§Ù„Ø®Ø¶Ø§Ø± ÙÙŠ Ø§Ù„ØºØ§Ø¨Ø© Ø§Ù„Ø³Ø­Ø±ÙŠØ©</p>
                <button id="start-welcome"><i class="fas fa-play"></i> Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø©</button>
            </div>
        </div>
        
        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
        <div id="start-screen" class="screen">
            <div class="mode-indicator" id="mode-indicator">ÙˆØ¶Ø¹ Ø§Ù„ÙÙˆØ§ÙƒÙ‡</div>
            
            <div class="selection-category">
                <div class="category-title">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù„Ø¹Ø¨Ø©</div>
                <div class="fruit-selection">
                    <div class="selection-btn active" id="fruit-mode-btn">
                        <div class="selection-title">ğŸ® ÙˆØ¶Ø¹ Ø§Ù„ÙÙˆØ§ÙƒÙ‡</div>
                        <div class="selection-items">ğŸ ğŸŒ ğŸ‡ ğŸ“</div>
                    </div>
                    
                    <div class="selection-btn vegetable-selection-btn" id="vegetable-mode-btn">
                        <div class="selection-title">ğŸ® ÙˆØ¶Ø¹ Ø§Ù„Ø®Ø¶Ø§Ø±</div>
                        <div class="selection-items">ğŸ¥¦ ğŸ¥• ğŸ† ğŸŒ½</div>
                    </div>

                    <div class="selection-btn tournament-selection-btn" id="tournament-mode-btn">
                        <div class="selection-title">ğŸ† ÙˆØ¶Ø¹ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©</div>
                        <div class="selection-items">ğŸ† ğŸ¥‡ ğŸ¥ˆ ğŸ¥‰</div>
                    </div>
                </div>
            </div>

            <div class="selection-category" id="category-selection">
                <div class="category-title">Ø§Ø®ØªØ± Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù„Ø¹Ø¨</div>
                <div class="fruit-selection" id="sets-container">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                </div>
            </div>
            
            <button id="start-game"><i class="fas fa-play-circle"></i> Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
            <button id="change-names"><i class="fas fa-users"></i> ØªØ¹Ø¯ÙŠÙ„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</button>
            
            <div class="instructions">
                <h3>ğŸ“‹ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„Ø¹Ø¨</h3>
                <p>â€¢ ÙƒÙ„ Ù„Ø§Ø¹Ø¨ ÙŠØ¨Ø¯Ø£ Ø¨Ø£Ø±Ø¨Ø¹ Ø¹Ù†Ø§ØµØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© (ÙÙˆØ§ÙƒÙ‡ Ø£Ùˆ Ø®Ø¶Ø§Ø±)</p>
                <p>â€¢ ÙÙŠ Ø¯ÙˆØ±ÙƒØŒ Ø§Ø®ØªØ± Ø¹Ù†ØµØ±Ø§Ù‹ Ù„ØªÙ…Ø±ÙŠØ±Ù‡ Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ</p>
                <p>â€¢ Ø£ÙˆÙ„ Ù„Ø§Ø¹Ø¨ ÙŠØ¬Ù…Ø¹ 4 Ø¹Ù†Ø§ØµØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø© Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù†ÙˆØ¹ ÙŠÙÙˆØ²</p>
                <p>â€¢ Ù…Ø±Ø± Ø§Ù„Ø¬Ù‡Ø§Ø² Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ Ø¹Ù†Ø¯ Ø¸Ù‡ÙˆØ± Ø§Ù„Ø´Ø§Ø´Ø©</p>
                <p>â€¢ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† ÙˆØ¶Ø¹ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ ÙˆØ§Ù„Ø®Ø¶Ø§Ø± Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</p>
            </div>
        </div>
        
        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ -->
        <div id="names-screen" class="screen">
            <h2 style="color: var(--primary-color); font-size: 2rem;">âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</h2>
            
            <div style="width: 100%; margin: 30px 0;">
                <div style="display: flex; align-items: center; gap: 15px; margin: 20px 0;">
                    <label style="min-width: 100px; font-weight: 800; color: var(--primary-color);">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¡:</label>
                    <input type="text" id="player1-name" value="Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¡" style="flex: 1; padding: 15px; border: 3px solid var(--accent-color); border-radius: 12px; font-size: 1.1rem; background: #f9f9f9;">
                </div>
                <div style="display: flex; align-items: center; gap: 15px; margin: 20px 0;">
                    <label style="min-width: 100px; font-weight: 800; color: var(--primary-color);">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¢:</label>
                    <input type="text" id="player2-name" value="Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¢" style="flex: 1; padding: 15px; border: 3px solid var(--accent-color); border-radius: 12px; font-size: 1.1rem; background: #f9f9f9;">
                </div>
                <div style="display: flex; align-items: center; gap: 15px; margin: 20px 0;">
                    <label style="min-width: 100px; font-weight: 800; color: var(--primary-color);">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù£:</label>
                    <input type="text" id="player3-name" value="Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù£" style="flex: 1; padding: 15px; border: 3px solid var(--accent-color); border-radius: 12px; font-size: 1.1rem; background: #f9f9f9;">
                </div>
                <div style="display: flex; align-items: center; gap: 15px; margin: 20px 0;">
                    <label style="min-width: 100px; font-weight: 800; color: var(--primary-color);">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¤:</label>
                    <input type="text" id="player4-name" value="Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¤" style="flex: 1; padding: 15px; border: 3px solid var(--accent-color); border-radius: 12px; font-size: 1.1rem; background: #f9f9f9;">
                </div>
            </div>
            
            <button id="save-names"><i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡</button>
            <button id="back-to-main"><i class="fas fa-home"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        </div>

        <!-- Ø´Ø§Ø´Ø© ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¬Ù‡Ø§Ø² Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„ -->
        <div id="first-player-pass-screen" class="screen">
            <div class="pass-device-screen" style="background: var(--fruit-gradient);">
                <h2 style="color: white; margin-bottom: 25px; font-size: 2rem;">ğŸ“± Ù…Ø±Ø± Ø§Ù„Ø¬Ù‡Ø§Ø²</h2>
                <div class="pass-device-icon">ğŸ“± â¡ï¸</div>
                <h3 style="color: white; font-size: 2.2rem; margin: 25px 0; font-weight: 800;" id="first-player-text">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¡</h3>
                <p style="color: white; margin-bottom: 35px; font-size: 1.3rem; font-weight: 600;">Ø§Ù„Ù„Ø¹Ø¨Ø© Ø³ØªØ¨Ø¯Ø£ Ø¨Ø¯ÙˆØ±ÙƒØŒ Ø§Ø­ØªÙØ¸ Ø¨Ø¨Ø·Ø§Ù‚Ø§ØªÙƒ Ø³Ø±ÙŠØ©!</p>
                <button id="first-player-ready"><i class="fas fa-thumbs-up"></i> Ø£Ù†Ø§ Ø¬Ø§Ù‡Ø²!</button>
            </div>
        </div>
        
        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨ -->
        <div id="player-turn-screen" class="screen">
            <div class="player-turn" id="player-turn-header">
                <h2 id="current-player-text">Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¡</h2>
                <p>Ø§Ø®ØªØ± Ø¹Ù†ØµØ±Ø§Ù‹ Ù„ØªÙ…Ø±ÙŠØ±Ù‡ Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ</p>
            </div>
            
            <div class="cards-container" id="player-cards"></div>
            
            <button id="submit-card" disabled><i class="fas fa-share"></i> ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¹Ù†ØµØ±</button>
            <button id="win-game" style="background: var(--gold-color); color: var(--text-dark);"><i class="fas fa-trophy"></i> Ø£Ø¹Ù„Ù† ÙÙˆØ²ÙŠ!</button>
            <button id="back-to-main-from-game"><i class="fas fa-home"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        </div>
        
        <!-- Ø´Ø§Ø´Ø© ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¬Ù‡Ø§Ø² -->
        <div id="pass-device-screen" class="screen">
            <div class="pass-device-screen" style="background: var(--fruit-gradient);">
                <h2 style="color: white; margin-bottom: 25px; font-size: 2rem;">ğŸ“± Ù…Ø±Ø± Ø§Ù„Ø¬Ù‡Ø§Ø²</h2>
                <div class="pass-device-icon">ğŸ“± â¡ï¸</div>
                <h3 style="color: white; font-size: 2.2rem; margin: 25px 0; font-weight: 800;" id="next-player-text">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¢</h3>
                <p style="color: white; margin-bottom: 35px; font-size: 1.3rem; font-weight: 600;">âš ï¸ Ù„Ø§ ØªÙ†Ø¸Ø± Ø¥Ù„Ù‰ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†!</p>
                <button id="next-player-ready"><i class="fas fa-thumbs-up"></i> Ø£Ù†Ø§ Ø¬Ø§Ù‡Ø²!</button>
            </div>
        </div>
        
        <!-- Ø´Ø§Ø´Ø© Ø§Ù„ÙØ§Ø¦Ø² -->
        <div id="winner-screen" class="screen">
            <div class="winner-celebration">
                <div class="winner-trophy">ğŸ†</div>
                <h2 class="winner-name" id="winner-text">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¡ ÙØ§Ø²!</h2>
                <p class="winner-message">Ø¨Ø¬Ù…Ø¹ 4 Ø¹Ù†Ø§ØµØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø© Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù†ÙˆØ¹</p>
                <div class="winner-items" id="winner-items"></div>
                <button id="new-round"><i class="fas fa-redo"></i> Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
                <button id="back-to-main-from-win"><i class="fas fa-home"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø³Ù„Ù… Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© -->
        <div id="tournament-screen" class="screen">
            <div style="text-align: center; padding: 40px; background: var(--tournament-gradient); border-radius: 20px; border: 4px solid var(--gold-color); width: 100%; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);">
                <h2 style="color: white; margin-bottom: 25px; font-size: 2.2rem;">ğŸ† Ø³Ù„Ù… Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©</h2>
                <div class="tournament-bracket" id="tournament-bracket">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                </div>
                <button id="continue-tournament"><i class="fas fa-play"></i> Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©</button>
                <button id="back-to-main-from-tournament"><i class="fas fa-home"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            </div>
        </div>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
        const gameState = {
            players: [
                { id: 1, name: "Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¡", cards: [], wins: 0 },
                { id: 2, name: "Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¢", cards: [], wins: 0 },
                { id: 3, name: "Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù£", cards: [], wins: 0 },
                { id: 4, name: "Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¤", cards: [], wins: 0 }
            ],
            // Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„ÙÙˆØ§ÙƒÙ‡
            fruitSets: {
                set1: { 
                    name: "Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©", 
                    items: ['ğŸŒ', 'ğŸ', 'ğŸ¥¥', 'ğŸ¥­'],
                    type: 'fruit'
                },
                set2: { 
                    name: "Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ø­Ù…Ø¶ÙŠØ©", 
                    items: ['ğŸŠ', 'ğŸ‹', 'ğŸˆ', 'ğŸ¥'],
                    type: 'fruit'
                },
                set3: { 
                    name: "Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ù…Ø­Ù„ÙŠØ©", 
                    items: ['ğŸ', 'ğŸ‡', 'ğŸ“', 'ğŸ‰'],
                    type: 'fruit'
                }
            },
            // Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø®Ø¶Ø§Ø±
            vegetableSets: {
                set5: { 
                    name: "Ø§Ù„Ø®Ø¶Ø§Ø± Ø§Ù„Ø¬Ø°Ø±ÙŠØ©", 
                    items: ['ğŸ¥•', 'ğŸ…', 'ğŸ†', 'ğŸŒ½'],
                    type: 'vegetable'
                }
            },
            currentSet: 'set1',
            gameMode: 'fruit',
            currentPlayerIndex: 0,
            selectedCardIndex: null,
            deck: [],
            soundEnabled: true
        };

        // Ø§Ù„Ø¹Ù†Ø§ØµØ±
        const screens = {
            welcome: document.getElementById('welcome-screen'),
            start: document.getElementById('start-screen'),
            names: document.getElementById('names-screen'),
            firstPlayerPass: document.getElementById('first-player-pass-screen'),
            playerTurn: document.getElementById('player-turn-screen'),
            passDevice: document.getElementById('pass-device-screen'),
            winner: document.getElementById('winner-screen'),
            tournament: document.getElementById('tournament-screen')
        };

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØµÙˆØª
        function playSound() {
            if (gameState.soundEnabled) {
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = 800;
                    oscillator.type = 'sine';
                    
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.2);
                } catch (e) {
                    console.log("Web Audio not supported");
                }
            }
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØµÙˆØª
        document.getElementById('sound-toggle').addEventListener('click', function() {
            gameState.soundEnabled = !gameState.soundEnabled;
            this.textContent = gameState.soundEnabled ? 'ğŸ”Š ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª' : 'ğŸ”‡ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª';
            playSound();
        });

        // ØªØ¨Ø¯ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ù„Ø¹Ø¨Ø©
        document.getElementById('fruit-mode-btn').addEventListener('click', function() {
            gameState.gameMode = 'fruit';
            updateModeDisplay();
            updateSetsDisplay();
            playSound();
        });

        document.getElementById('vegetable-mode-btn').addEventListener('click', function() {
            gameState.gameMode = 'vegetable';
            updateModeDisplay();
            updateSetsDisplay();
            playSound();
        });

        document.getElementById('tournament-mode-btn').addEventListener('click', function() {
            gameState.gameMode = 'tournament';
            updateModeDisplay();
            updateSetsDisplay();
            playSound();
        });

        function updateModeDisplay() {
            const modeIndicator = document.getElementById('mode-indicator');
            const fruitBtn = document.getElementById('fruit-mode-btn');
            const vegetableBtn = document.getElementById('vegetable-mode-btn');
            const tournamentBtn = document.getElementById('tournament-mode-btn');
            
            if (gameState.gameMode === 'fruit') {
                modeIndicator.textContent = 'ÙˆØ¶Ø¹ Ø§Ù„ÙÙˆØ§ÙƒÙ‡';
                modeIndicator.style.background = 'var(--fruit-gradient)';
                fruitBtn.classList.add('active');
                vegetableBtn.classList.remove('active');
                tournamentBtn.classList.remove('active');
            } else if (gameState.gameMode === 'vegetable') {
                modeIndicator.textContent = 'ÙˆØ¶Ø¹ Ø§Ù„Ø®Ø¶Ø§Ø±';
                modeIndicator.style.background = 'var(--vegetable-gradient)';
                vegetableBtn.classList.add('active');
                fruitBtn.classList.remove('active');
                tournamentBtn.classList.remove('active');
            } else {
                modeIndicator.textContent = 'ÙˆØ¶Ø¹ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©';
                modeIndicator.style.background = 'var(--tournament-gradient)';
                tournamentBtn.classList.add('active');
                fruitBtn.classList.remove('active');
                vegetableBtn.classList.remove('active');
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù„Ø¹Ø¨
        function updateSetsDisplay() {
            const setsContainer = document.getElementById('sets-container');
            setsContainer.innerHTML = '';
            
            if (gameState.gameMode === 'fruit') {
                Object.keys(gameState.fruitSets).forEach(setId => {
                    const set = gameState.fruitSets[setId];
                    const setBtn = document.createElement('div');
                    setBtn.className = `selection-btn ${setId === gameState.currentSet ? 'active' : ''}`;
                    setBtn.id = `${setId}-btn`;
                    setBtn.innerHTML = `
                        <div class="selection-title">${set.name}</div>
                        <div class="selection-items">${set.items.join(' ')}</div>
                    `;
                    setBtn.addEventListener('click', () => selectSet(setId));
                    setsContainer.appendChild(setBtn);
                });
            } else if (gameState.gameMode === 'vegetable') {
                Object.keys(gameState.vegetableSets).forEach(setId => {
                    const set = gameState.vegetableSets[setId];
                    const setBtn = document.createElement('div');
                    setBtn.className = `selection-btn vegetable-selection-btn ${setId === gameState.currentSet ? 'active' : ''}`;
                    setBtn.id = `${setId}-btn`;
                    setBtn.innerHTML = `
                        <div class="selection-title">${set.name}</div>
                        <div class="selection-items">${set.items.join(' ')}</div>
                    `;
                    setBtn.addEventListener('click', () => selectSet(setId));
                    setsContainer.appendChild(setBtn);
                });
            } else {
                // ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©ØŒ Ù†Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª
                Object.keys(gameState.fruitSets).forEach(setId => {
                    const set = gameState.fruitSets[setId];
                    const setBtn = document.createElement('div');
                    setBtn.className = `selection-btn ${setId === gameState.currentSet ? 'active' : ''}`;
                    setBtn.id = `${setId}-btn`;
                    setBtn.innerHTML = `
                        <div class="selection-title">${set.name}</div>
                        <div class="selection-items">${set.items.join(' ')}</div>
                    `;
                    setBtn.addEventListener('click', () => selectSet(setId));
                    setsContainer.appendChild(setBtn);
                });
                
                Object.keys(gameState.vegetableSets).forEach(setId => {
                    const set = gameState.vegetableSets[setId];
                    const setBtn = document.createElement('div');
                    setBtn.className = `selection-btn vegetable-selection-btn ${setId === gameState.currentSet ? 'active' : ''}`;
                    setBtn.id = `${setId}-btn`;
                    setBtn.innerHTML = `
                        <div class="selection-title">${set.name}</div>
                        <div class="selection-items">${set.items.join(' ')}</div>
                    `;
                    setBtn.addEventListener('click', () => selectSet(setId));
                    setsContainer.appendChild(setBtn);
                });
            }
        }

        // Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù„Ø¹Ø¨
        function selectSet(setId) {
            gameState.currentSet = setId;
            playSound();
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø¸Ù‡Ø± Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll('.selection-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`${setId}-btn`).classList.add('active');
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        function initGame() {
            let currentSetData;
            
            if (gameState.gameMode === 'fruit') {
                currentSetData = gameState.fruitSets[gameState.currentSet];
            } else if (gameState.gameMode === 'vegetable') {
                currentSetData = gameState.vegetableSets[gameState.currentSet];
            } else {
                // ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©ØŒ Ù†Ø®ØªØ§Ø± Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
                const allSets = {...gameState.fruitSets, ...gameState.vegetableSets};
                const setKeys = Object.keys(allSets);
                const randomSetKey = setKeys[Math.floor(Math.random() * setKeys.length)];
                currentSetData = allSets[randomSetKey];
            }
            
            gameState.deck = [];
            
            // Ù…Ù„Ø¡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
            currentSetData.items.forEach(item => {
                for (let i = 0; i < 4; i++) {
                    gameState.deck.push(item);
                }
            });
            
            // Ø®Ù„Ø· Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
            for (let i = gameState.deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [gameState.deck[i], gameState.deck[j]] = [gameState.deck[j], gameState.deck[i]];
            }
            
            // ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
            gameState.players.forEach(player => {
                player.cards = [];
                for (let i = 0; i < 4; i++) {
                    if (gameState.deck.length > 0) {
                        player.cards.push(gameState.deck.pop());
                    }
                }
            });
            
            // Ø§Ø®ØªÙŠØ§Ø± Ù„Ø§Ø¹Ø¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
            gameState.currentPlayerIndex = Math.floor(Math.random() * 4);
            updatePlayerIndicators();
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
            const playerTurnHeader = document.getElementById('player-turn-header');
            if (gameState.gameMode === 'vegetable') {
                playerTurnHeader.className = 'player-turn vegetable-mode';
            } else if (gameState.gameMode === 'tournament') {
                playerTurnHeader.className = 'player-turn tournament-mode';
            } else {
                playerTurnHeader.className = 'player-turn';
            }
            
            playSound();
            
            // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¬Ù‡Ø§Ø² Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„
            showFirstPlayerPassScreen();
        }

        // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¬Ù‡Ø§Ø² Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„
        function showFirstPlayerPassScreen() {
            hideAllScreens();
            screens.firstPlayerPass.classList.add('active');
            
            const firstPlayer = gameState.players[gameState.currentPlayerIndex];
            document.getElementById('first-player-text').textContent = firstPlayer.name;
            
            // ØªØ­Ø¯ÙŠØ« Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© Ø­Ø³Ø¨ ÙˆØ¶Ø¹ Ø§Ù„Ù„Ø¹Ø¨Ø©
            const firstPlayerScreen = document.getElementById('first-player-pass-screen').querySelector('.pass-device-screen');
            if (gameState.gameMode === 'vegetable') {
                firstPlayerScreen.style.background = 'var(--vegetable-gradient)';
            } else if (gameState.gameMode === 'tournament') {
                firstPlayerScreen.style.background = 'var(--tournament-gradient)';
            } else {
                firstPlayerScreen.style.background = 'var(--fruit-gradient)';
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
        function updatePlayerIndicators() {
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙØ© Ø§Ù„Ù†Ø´Ø·Ø© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª
            document.querySelectorAll('.player-indicator div').forEach(indicator => {
                indicator.classList.remove('active-player');
            });
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙØ© Ø§Ù„Ù†Ø´Ø·Ø© Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
            const currentPlayer = gameState.players[gameState.currentPlayerIndex];
            const indicatorId = `player${currentPlayer.id}-indicator`;
            document.getElementById(indicatorId).classList.add('active-player');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ
            document.getElementById('player1-indicator').textContent = gameState.players[0].name;
            document.getElementById('player2-indicator').textContent = gameState.players[1].name;
            document.getElementById('player3-indicator').textContent = gameState.players[2].name;
            document.getElementById('player4-indicator').textContent = gameState.players[3].name;
        }

        // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨
        function showPlayerTurnScreen() {
            hideAllScreens();
            screens.playerTurn.classList.add('active');
            
            const currentPlayer = gameState.players[gameState.currentPlayerIndex];
            document.getElementById('current-player-text').textContent = `Ø¯ÙˆØ± ${currentPlayer.name}`;
            
            displayPlayerCards(currentPlayer);
            document.getElementById('submit-card').disabled = true;
            gameState.selectedCardIndex = null;
        }

        // Ø¹Ø±Ø¶ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨
        function displayPlayerCards(player) {
            const cardsContainer = document.getElementById('player-cards');
            cardsContainer.innerHTML = '';
            
            player.cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.textContent = card;
                cardElement.dataset.index = index;
                
                cardElement.addEventListener('click', () => selectCard(index, cardElement));
                
                cardsContainer.appendChild(cardElement);
            });
        }

        // Ø§Ø®ØªÙŠØ§Ø± Ø¨Ø·Ø§Ù‚Ø©
        function selectCard(index, cardElement) {
            // Ø¥Ù„ØºØ§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
            document.querySelectorAll('.card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
            cardElement.classList.add('selected');
            gameState.selectedCardIndex = index;
            document.getElementById('submit-card').disabled = false;
            
            playSound();
        }

        // ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ
        function passCardToNextPlayer() {
            if (gameState.selectedCardIndex === null) return;
            
            const currentPlayer = gameState.players[gameState.currentPlayerIndex];
            const nextPlayerIndex = (gameState.currentPlayerIndex + 1) % 4;
            const nextPlayer = gameState.players[nextPlayerIndex];
            
            // Ø£Ø®Ø° Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ù…Ù† Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
            const selectedCard = currentPlayer.cards.splice(gameState.selectedCardIndex, 1)[0];
            
            // Ø¥Ø¹Ø·Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ
            nextPlayer.cards.push(selectedCard);
            
            playSound();
            showPassDeviceScreen(nextPlayer);
        }

        // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¬Ù‡Ø§Ø²
        function showPassDeviceScreen(nextPlayer) {
            hideAllScreens();
            screens.passDevice.classList.add('active');
            
            document.getElementById('next-player-text').textContent = nextPlayer.name;
            
            // ØªØ­Ø¯ÙŠØ« Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© Ø­Ø³Ø¨ ÙˆØ¶Ø¹ Ø§Ù„Ù„Ø¹Ø¨Ø©
            const passDeviceScreen = document.getElementById('pass-device-screen').querySelector('.pass-device-screen');
            if (gameState.gameMode === 'vegetable') {
                passDeviceScreen.style.background = 'var(--vegetable-gradient)';
            } else if (gameState.gameMode === 'tournament') {
                passDeviceScreen.style.background = 'var(--tournament-gradient)';
            } else {
                passDeviceScreen.style.background = 'var(--fruit-gradient)';
            }
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ÙØ§Ø¦Ø²
        function checkForWinner() {
            for (let i = 0; i < gameState.players.length; i++) {
                const player = gameState.players[i];
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯Ù‰ Ø§Ù„Ù„Ø§Ø¹Ø¨ 4 Ø¨Ø·Ø§Ù‚Ø§Øª Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù†ÙˆØ¹
                const itemCounts = {};
                player.cards.forEach(item => {
                    itemCounts[item] = (itemCounts[item] || 0) + 1;
                });
                
                for (const item in itemCounts) {
                    if (itemCounts[item] === 4) {
                        return { winner: player, item: item };
                    }
                }
            }
            return null;
        }

        // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„ÙØ§Ø¦Ø²
        function showWinnerScreen(winner, item) {
            hideAllScreens();
            screens.winner.classList.add('active');
            
            document.getElementById('winner-text').textContent = `${winner.name} ÙØ§Ø²!`;
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙØ§Ø¦Ø²Ø©
            const winnerItems = document.getElementById('winner-items');
            winnerItems.innerHTML = '';
            for (let i = 0; i < 4; i++) {
                const itemElement = document.createElement('div');
                itemElement.textContent = item;
                winnerItems.appendChild(itemElement);
            }
            
            playSound();
            
            // ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©ØŒ Ù†Ø²ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ² Ù„Ù„Ø§Ø¹Ø¨
            if (gameState.gameMode === 'tournament') {
                winner.wins++;
                
                // Ø¥Ø°Ø§ ÙØ§Ø² Ù„Ø§Ø¹Ø¨ 3 Ù…Ø±Ø§ØªØŒ Ù†Ù†Ù‡ÙŠ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©
                if (winner.wins >= 3) {
                    setTimeout(() => {
                        alert(`${winner.name} ÙØ§Ø² Ø¨Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©!`);
                        resetTournament();
                    }, 2000);
                }
            }
        }

        // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª
        function hideAllScreens() {
            Object.values(screens).forEach(screen => {
                screen.classList.remove('active');
            });
        }

        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ
        function moveToNextPlayer() {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ÙØ§Ø¦Ø²
            const winnerInfo = checkForWinner();
            if (winnerInfo) {
                showWinnerScreen(winnerInfo.winner, winnerInfo.item);
                return;
            }
            
            gameState.currentPlayerIndex = (gameState.currentPlayerIndex + 1) % 4;
            gameState.selectedCardIndex = null;
            updatePlayerIndicators();
            showPlayerTurnScreen();
        }

        // Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±
        function setupNameAutoSave() {
            document.getElementById('player1-name').addEventListener('input', function() {
                gameState.players[0].name = this.value || 'Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¡';
                updatePlayerIndicators();
            });
            
            document.getElementById('player2-name').addEventListener('input', function() {
                gameState.players[1].name = this.value || 'Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¢';
                updatePlayerIndicators();
            });
            
            document.getElementById('player3-name').addEventListener('input', function() {
                gameState.players[2].name = this.value || 'Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù£';
                updatePlayerIndicators();
            });
            
            document.getElementById('player4-name').addEventListener('input', function() {
                gameState.players[3].name = this.value || 'Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¤';
                updatePlayerIndicators();
            });
        }

        // Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙŠØ¯ÙˆÙŠØ§Ù‹
        function savePlayerNames() {
            gameState.players[0].name = document.getElementById('player1-name').value || 'Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¡';
            gameState.players[1].name = document.getElementById('player2-name').value || 'Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¢';
            gameState.players[2].name = document.getElementById('player3-name').value || 'Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù£';
            gameState.players[3].name = document.getElementById('player4-name').value || 'Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù¤';
            
            updatePlayerIndicators();
            showScreen('start');
            playSound();
        }

        // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ù…Ø­Ø¯Ø¯Ø©
        function showScreen(screenName) {
            hideAllScreens();
            screens[screenName].classList.add('active');
            playSound();
        }

        // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©
        function showTournamentScreen() {
            hideAllScreens();
            screens.tournament.classList.add('active');
            
            updateTournamentBracket();
        }

        // ØªØ­Ø¯ÙŠØ« Ø³Ù„Ù… Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©
        function updateTournamentBracket() {
            const bracket = document.getElementById('tournament-bracket');
            bracket.innerHTML = '';
            
            gameState.players.forEach((player, index) => {
                const round = document.createElement('div');
                round.className = 'tournament-round';
                
                const playerElement = document.createElement('div');
                playerElement.className = 'tournament-player';
                if (player.wins > 0) {
                    playerElement.classList.add('tournament-winner');
                }
                
                playerElement.innerHTML = `
                    <span>${player.name}</span>
                    <span>${'â˜…'.repeat(player.wins)}</span>
                `;
                
                round.appendChild(playerElement);
                bracket.appendChild(round);
            });
        }

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©
        function resetTournament() {
            gameState.players.forEach(player => {
                player.wins = 0;
            });
            updateTournamentBracket();
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªÙ†Ø¨ÙŠÙ‡ Ù…Ø®ØµØµØ©
        function showCustomAlert(message, title = "ØªÙ†Ø¨ÙŠÙ‡") {
            // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            const overlay = document.createElement('div');
            overlay.className = 'alert-overlay';
            
            const alertBox = document.createElement('div');
            alertBox.className = 'custom-alert';
            alertBox.innerHTML = `
                <h3>âš ï¸ ${title}</h3>
                <p>${message}</p>
                <button onclick="closeCustomAlert()">Ø­Ø³Ù†Ø§Ù‹</button>
            `;
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©
            document.body.appendChild(overlay);
            document.body.appendChild(alertBox);
            
            // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
            playSound();
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        function closeCustomAlert() {
            const overlay = document.querySelector('.alert-overlay');
            const alertBox = document.querySelector('.custom-alert');
            
            if (overlay) overlay.remove();
            if (alertBox) alertBox.remove();
            
            playSound();
        }

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        document.getElementById('start-welcome').addEventListener('click', () => showScreen('start'));
        document.getElementById('start-game').addEventListener('click', initGame);
        document.getElementById('change-names').addEventListener('click', () => showScreen('names'));
        document.getElementById('save-names').addEventListener('click', savePlayerNames);
        document.getElementById('back-to-main').addEventListener('click', () => showScreen('start'));
        document.getElementById('back-to-main-from-game').addEventListener('click', () => showScreen('start'));
        document.getElementById('back-to-main-from-win').addEventListener('click', () => showScreen('start'));
        document.getElementById('back-to-main-from-tournament').addEventListener('click', () => showScreen('start'));
        
        document.getElementById('first-player-ready').addEventListener('click', function() {
            if (gameState.gameMode === 'tournament') {
                showTournamentScreen();
            } else {
                showPlayerTurnScreen();
            }
        });
        
        document.getElementById('submit-card').addEventListener('click', passCardToNextPlayer);
        document.getElementById('next-player-ready').addEventListener('click', moveToNextPlayer);
        
        // ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø§Ù„Ø© win-game Ù„ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø®ØµØµØ©
        document.getElementById('win-game').addEventListener('click', function() {
            const winnerInfo = checkForWinner();
            if (winnerInfo) {
                showWinnerScreen(winnerInfo.winner, winnerInfo.item);
            } else {
                showCustomAlert(
                    "Ù„Ù… ØªØ¬Ù…Ø¹ 4 Ø¹Ù†Ø§ØµØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø© Ø¨Ø¹Ø¯! ğŸµ<br>Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨ Ø­ØªÙ‰ ØªØ­ØµÙ„ Ø¹Ù„Ù‰ 4 Ø¹Ù†Ø§ØµØ± Ù…ØªØ´Ø§Ø¨Ù‡Ø©",
                    "Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ 4 Ø¹Ù†Ø§ØµØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©"
                );
            }
        });
        
        document.getElementById('new-round').addEventListener('click', initGame);
        document.getElementById('continue-tournament').addEventListener('click', showPlayerTurnScreen);

        // Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
        window.addEventListener('DOMContentLoaded', function() {
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            setupNameAutoSave();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            updateModeDisplay();
            updateSetsDisplay();
            selectSet('set1');
        });
    </script>
</body>
</html>